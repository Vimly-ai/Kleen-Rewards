import { useState } from 'react'\nimport { Button } from '../ui/Button'\nimport { Heart, Plus, Check } from 'lucide-react'\nimport { clsx } from 'clsx'\n\ninterface WishlistButtonProps {\n  isWishlisted: boolean\n  onToggle: () => Promise<void> | void\n  size?: 'small' | 'medium' | 'large'\n  variant?: 'button' | 'icon'\n  disabled?: boolean\n  className?: string\n}\n\nexport function WishlistButton({\n  isWishlisted,\n  onToggle,\n  size = 'medium',\n  variant = 'button',\n  disabled = false,\n  className\n}: WishlistButtonProps) {\n  const [isLoading, setIsLoading] = useState(false)\n  const [showAnimation, setShowAnimation] = useState(false)\n  \n  const handleClick = async () => {\n    if (disabled || isLoading) return\n    \n    setIsLoading(true)\n    try {\n      await onToggle()\n      if (!isWishlisted) {\n        setShowAnimation(true)\n        setTimeout(() => setShowAnimation(false), 600)\n      }\n    } finally {\n      setIsLoading(false)\n    }\n  }\n  \n  if (variant === 'icon') {\n    return (\n      <button\n        onClick={handleClick}\n        disabled={disabled || isLoading}\n        className={clsx(\n          'relative p-2 rounded-full transition-all duration-200',\n          'hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500',\n          isWishlisted \n            ? 'text-red-500 bg-red-50' \n            : 'text-gray-400 hover:text-red-500',\n          disabled && 'opacity-50 cursor-not-allowed',\n          className\n        )}\n      >\n        <Heart \n          className={clsx(\n            'transition-all duration-200',\n            size === 'small' && 'w-4 h-4',\n            size === 'medium' && 'w-5 h-5',\n            size === 'large' && 'w-6 h-6',\n            isWishlisted && 'fill-current scale-110',\n            showAnimation && 'animate-pulse'\n          )} \n        />\n        \n        {/* Animation overlay */}\n        {showAnimation && (\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"w-8 h-8 bg-red-500 rounded-full animate-ping opacity-75\" />\n          </div>\n        )}\n      </button>\n    )\n  }\n  \n  return (\n    <Button\n      variant={isWishlisted ? 'primary' : 'outline'}\n      size={size}\n      onClick={handleClick}\n      disabled={disabled}\n      isLoading={isLoading}\n      className={clsx(\n        'relative overflow-hidden transition-all duration-200',\n        isWishlisted && 'bg-red-500 hover:bg-red-600 border-red-500',\n        showAnimation && 'animate-pulse',\n        className\n      )}\n    >\n      <div className=\"flex items-center gap-2\">\n        {isWishlisted ? (\n          <>\n            <Check className=\"w-4 h-4\" />\n            <span>Wishlisted</span>\n          </>\n        ) : (\n          <>\n            <Plus className=\"w-4 h-4\" />\n            <span>Add to Wishlist</span>\n          </>\n        )}\n      </div>\n      \n      {/* Success animation */}\n      {showAnimation && (\n        <div className=\"absolute inset-0 bg-green-500 flex items-center justify-center animate-pulse\">\n          <Check className=\"w-4 h-4 text-white\" />\n        </div>\n      )}\n    </Button>\n  )\n}